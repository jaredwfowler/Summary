/***************************************************************************************************
***********************         |\/| o  _ ._ _  |  _   _   _.  _            ************************
***********************         |  | | (_ | (_) | (/_ (_| (_| (_ \/         ************************
***********************                                _|        /          ************************
************************                      Estd. 2015                    ************************
****************************************************************************************************
****************************************************************************************************
**** The use, disclosure, reproduction, modification, transfer, or transmittal of this work for ****
**** any purpose in any form or by any means without the written permission of Microlegacy is   ****
**** strictly prohibited.                                                                       ****
****                                                                                            ****
**** Confidential, Unpublished Property of Microlegacy.                                         ****
**** Use and Distribution Limited Solely to Authorized Personnel.                               ****
****                                                                                            ****
**** All Rights Reserved                                                                        ****
****************************************************************************************************
CREATOR ********************************************************************************************
****************************************************************************************************
****  Name:  Jared Fowler
**** Title:  Co-Founder of Microlegacy
****  Date:  May 3, 2016
**** Email:  jaredwfowler@hotmail.com
****************************************************************************************************
VERSION ********************************************************************************************
****************************************************************************************************
** Version #: 1.0
** Version Date: May 3, 2016
** Revision Personnel: JFowler, 
****************************************************************************************************
ABOUT **********************************************************************************************
****************************************************************************************************
Helpers used for unit testing
****************************************************************************************************
***************************************************************************************************/
//Dependencies======================================================================================
//==================================================================================================

struct StockDay {
   StockDay(int _daysSince1970, float _open, float _high, float _low, float _close, unsigned long long _volume)
   : daysSince1970(_daysSince1970),
     open(_open),
     high(_high),
     low(_low),
     close(_close),
     volume(_volume)
   {}

   int daysSince1970;
   float open;
   float high;
   float low;
   float close;
   unsigned long long volume;
};

//http://www.google.com/finance/historical?q=AAPL&startdate=2014-01-06&enddate=2014-12-31&output=csv
const StockDay AAPL_HISTORY_06012014_31122014[] =
{   //DaysSince1970, Open,   High,    Low,  Close,   Volume
   StockDay(16435, 112.82, 113.13, 110.21, 110.38, 41403351),
   StockDay(16434, 113.64, 113.92, 112.11, 112.52, 29881477),
   StockDay(16433, 113.79, 114.77, 113.7, 113.91, 27598920),
   StockDay(16430, 112.1, 114.52, 112.01, 113.99, 33720951),
   StockDay(16428, 112.58, 112.71, 112.01, 112.01, 14479611),
   StockDay(16427, 113.23, 113.33, 112.46, 112.54, 26028419),
   StockDay(16426, 112.16, 113.49, 111.97, 112.94, 45167549),
   StockDay(16423, 112.26, 113.24, 111.66, 111.78, 88429770),
   StockDay(16422, 111.87, 112.65, 110.66, 112.65, 59006218),
   StockDay(16421, 107.12, 109.84, 106.82, 109.41, 53411773),
   StockDay(16420, 106.37, 110.16, 106.26, 106.74, 60790733),
   StockDay(16419, 110.7, 111.6, 106.35, 108.22, 67218082),
   StockDay(16416, 110.46, 111.87, 109.58, 109.73, 56028138),
   StockDay(16415, 112.26, 113.8, 111.34, 111.62, 41471578),
   StockDay(16414, 114.41, 114.85, 111.54, 111.95, 44565318),
   StockDay(16413, 110.19, 114.3, 109.35, 114.12, 60208036),
   StockDay(16412, 114.1, 114.65, 111.62, 112.4, 57664850),
   StockDay(16409, 115.99, 116.08, 114.64, 115, 38318895),
   StockDay(16408, 115.77, 117.2, 115.29, 115.49, 42155776),
   StockDay(16407, 115.75, 116.35, 115.11, 115.93, 43063440),
   StockDay(16406, 113.5, 115.75, 112.75, 114.63, 59348940),
   StockDay(16405, 118.81, 119.25, 111.27, 115.07, 83814037),
   StockDay(16402, 119.27, 119.4, 118.05, 118.93, 24814402),
   StockDay(16400, 117.94, 119.1, 117.83, 119, 40831886),
   StockDay(16399, 119.07, 119.75, 117.45, 117.6, 68840440),
   StockDay(16398, 116.85, 118.77, 116.62, 118.62, 47450824),
   StockDay(16395, 117.51, 117.57, 116.03, 116.47, 57179298),
   StockDay(16394, 114.91, 116.86, 114.85, 116.31, 43395537),
   StockDay(16393, 115.44, 115.74, 113.8, 114.67, 41869160),
   StockDay(16392, 113.94, 115.69, 113.89, 115.47, 44223978),
   StockDay(16391, 114.27, 117.28, 113.3, 113.99, 46746712),
   StockDay(16388, 113.15, 114.19, 113.05, 114.18, 44063595),
   StockDay(16387, 111.8, 113.45, 111.6, 112.82, 59522855),
   StockDay(16386, 109.38, 111.43, 109.37, 111.25, 46942431),
   StockDay(16385, 108.7, 109.75, 108.4, 109.7, 27442252),
   StockDay(16384, 109.02, 109.33, 108.67, 108.83, 27195547),
   StockDay(16381, 108.75, 109.32, 108.55, 109.01, 33691535),
   StockDay(16380, 108.6, 108.79, 107.8, 108.7, 34968457),
   StockDay(16379, 109.1, 109.3, 108.12, 108.86, 37435905),
   StockDay(16378, 109.36, 109.49, 107.72, 108.6, 41574365),
   StockDay(16377, 108.22, 110.3, 108.01, 109.4, 52282550),
   StockDay(16374, 108.01, 108.04, 107.21, 108, 44639285),
   StockDay(16373, 106.96, 107.35, 105.9, 106.98, 40654793),
   StockDay(16372, 106.65, 107.37, 106.36, 107.34, 52687879),
   StockDay(16371, 105.4, 106.74, 105.35, 106.74, 48060949),
   StockDay(16370, 104.85, 105.48, 104.7, 105.11, 34187701),
   StockDay(16367, 105.18, 105.49, 104.53, 105.22, 47053916),
   StockDay(16366, 104.08, 105.05, 103.63, 104.83, 71074674),
   StockDay(16365, 102.84, 104.11, 102.6, 102.99, 68263146),
   StockDay(16364, 103.02, 103.02, 101.27, 102.47, 94623904),
   StockDay(16363, 98.32, 99.96, 98.22, 99.76, 77517279),
   StockDay(16360, 97.5, 99, 96.81, 97.67, 68179688),
   StockDay(16359, 95.55, 97.72, 95.41, 96.26, 72154523),
   StockDay(16358, 97.97, 99.15, 95.18, 97.54, 100933600),
   StockDay(16357, 100.39, 100.52, 98.57, 98.75, 63688562),
   StockDay(16356, 101.33, 101.78, 99.81, 99.81, 53583368),
   StockDay(16353, 100.69, 102.03, 100.3, 100.73, 66331592),
   StockDay(16352, 101.54, 102.38, 100.61, 101.02, 77376525),
   StockDay(16351, 98.76, 101.11, 98.31, 100.8, 57404674),
   StockDay(16350, 99.43, 100.12, 98.73, 98.75, 42094183),
   StockDay(16349, 99.95, 100.65, 99.42, 99.62, 37051182),
   StockDay(16346, 99.44, 100.21, 99.04, 99.62, 43469585),
   StockDay(16345, 99.27, 100.22, 98.04, 99.9, 47757828),
   StockDay(16344, 100.59, 100.69, 98.7, 99.18, 51491286),
   StockDay(16343, 100.81, 101.54, 100.53, 100.75, 55264139),
   StockDay(16342, 98.65, 100.44, 98.63, 100.11, 49766312),
   StockDay(16339, 98.53, 100.75, 98.4, 100.75, 62370501),
   StockDay(16338, 100.51, 100.71, 97.72, 97.87, 100091990),
   StockDay(16337, 102.16, 102.85, 101.2, 101.75, 60171828),
   StockDay(16336, 100.6, 102.94, 100.54, 102.64, 63402196),
   StockDay(16335, 101.8, 102.14, 100.58, 101.06, 52788426),
   StockDay(16332, 102.29, 102.35, 100.88, 100.96, 70902406),
   StockDay(16331, 101.93, 102.35, 101.56, 101.79, 37299435),
   StockDay(16330, 101.27, 101.8, 100.59, 101.58, 60926498),
   StockDay(16329, 99.8, 101.26, 98.89, 100.86, 66908133),
   StockDay(16328, 102.81, 103.05, 101.44, 101.63, 61316516),
   StockDay(16325, 101.21, 102.19, 101.08, 101.66, 64096903),
   StockDay(16324, 100.41, 101.44, 99.62, 101.43, 62399743),
   StockDay(16323, 98.01, 101.11, 97.76, 101, 100869587),
   StockDay(16322, 99.08, 103.08, 96.14, 97.99, 189846255),
   StockDay(16321, 99.3, 99.31, 98.05, 98.36, 46356742),
   StockDay(16318, 98.8, 99.39, 98.31, 98.97, 58457035),
   StockDay(16317, 98.85, 100.09, 97.79, 98.12, 85718221),
   StockDay(16316, 103.1, 103.2, 98.58, 98.94, 125420521),
   StockDay(16315, 103.06, 103.74, 102.72, 103.3, 53564262),
   StockDay(16311, 102.86, 102.9, 102.2, 102.5, 44595247),
   StockDay(16310, 102.13, 102.78, 101.56, 102.25, 68459801),
   StockDay(16309, 101.02, 102.57, 100.7, 102.13, 52369011),
   StockDay(16308, 101.42, 101.5, 100.86, 100.89, 33151984),
   StockDay(16307, 101.79, 102.17, 101.28, 101.54, 40270173),
   StockDay(16304, 100.29, 101.47, 100.19, 101.32, 44183834),
   StockDay(16303, 100.57, 100.94, 100.11, 100.58, 33478198),
   StockDay(16302, 100.44, 101.09, 99.95, 100.57, 52699192),
   StockDay(16301, 99.41, 100.68, 99.32, 100.53, 69399270),
   StockDay(16300, 98.49, 99.37, 97.98, 99.16, 47572413),
   StockDay(16297, 97.9, 98.19, 96.86, 97.98, 48951331),
   StockDay(16296, 97.33, 97.57, 96.8, 97.5, 28115566),
   StockDay(16295, 96.15, 97.24, 96.04, 97.24, 31916439),
   StockDay(16294, 96.04, 96.88, 95.61, 95.97, 33795352),
   StockDay(16293, 95.27, 96.08, 94.84, 95.99, 36584844),
   StockDay(16290, 94.26, 94.82, 93.28, 94.74, 41865193),
   StockDay(16289, 94.93, 95.95, 94.1, 94.48, 46711179),
   StockDay(16288, 94.75, 95.48, 94.71, 94.96, 38558342),
   StockDay(16287, 95.36, 95.68, 94.36, 95.12, 55932663),
   StockDay(16286, 96.37, 96.58, 95.17, 95.59, 39958144),
   StockDay(16283, 94.9, 96.62, 94.81, 96.13, 48511286),
   StockDay(16282, 97.16, 97.45, 95.33, 95.6, 56842647),
   StockDay(16281, 98.44, 98.7, 97.67, 98.15, 33010001),
   StockDay(16280, 99.33, 99.44, 98.25, 98.38, 43143095),
   StockDay(16279, 97.82, 99.24, 97.55, 99.02, 55317689),
   StockDay(16276, 96.85, 97.84, 96.64, 97.67, 43469117),
   StockDay(16275, 97.04, 97.32, 96.42, 97.03, 45728843),
   StockDay(16274, 95.42, 97.88, 95.17, 97.19, 92917719),
   StockDay(16273, 94.68, 94.89, 94.12, 94.72, 55196597),
   StockDay(16272, 94.99, 95, 93.72, 93.94, 39079002),
   StockDay(16269, 93.62, 94.74, 93.02, 94.43, 49987593),
   StockDay(16268, 95.03, 95.28, 92.57, 93.09, 57298243),
   StockDay(16267, 96.97, 97.1, 94.74, 94.78, 53502415),
   StockDay(16266, 96.8, 96.85, 95.03, 95.32, 45696176),
   StockDay(16265, 95.86, 96.89, 95.65, 96.45, 42810155),
   StockDay(16262, 95.36, 95.89, 94.86, 95.22, 34018228),
   StockDay(16261, 93.76, 95.55, 93.52, 95.04, 39685552),
   StockDay(16260, 95.44, 95.95, 94.76, 95.39, 36436440),
   StockDay(16259, 96.27, 96.8, 93.92, 95.35, 65221678),
   StockDay(16258, 94.14, 95.99, 94.1, 95.97, 56467939),
   StockDay(16254, 93.67, 94.1, 93.2, 94.03, 22891753),
   StockDay(16253, 93.86, 94.06, 93.09, 93.48, 28465073),
   StockDay(16252, 93.52, 94.07, 93.13, 93.52, 38223477),
   StockDay(16251, 92.1, 93.72, 92.09, 92.93, 49589028),
   StockDay(16248, 90.82, 92, 90.77, 91.98, 64028803),
   StockDay(16247, 90.37, 91.05, 89.8, 90.9, 32629359),
   StockDay(16246, 90.21, 90.7, 89.65, 90.36, 36868541),
   StockDay(16245, 90.75, 91.74, 90.19, 90.28, 39036087),
   StockDay(16244, 91.32, 91.62, 90.6, 90.83, 43694391),
   StockDay(16241, 91.85, 92.55, 90.9, 90.91, 100898066),
   StockDay(16240, 92.29, 92.3, 91.34, 91.86, 35527686),
   StockDay(16239, 92.27, 92.29, 91.35, 92.18, 33514108),
   StockDay(16238, 92.31, 92.7, 91.8, 92.08, 29726347),
   StockDay(16237, 91.51, 92.75, 91.45, 92.2, 35561270),
   StockDay(16234, 92.2, 92.44, 90.88, 91.28, 54525280),
   StockDay(16233, 94.04, 94.12, 91.9, 92.29, 54748791),
   StockDay(16232, 94.13, 94.76, 93.47, 93.86, 45681114),
   StockDay(16231, 94.73, 95.05, 93.57, 94.25, 62777042),
   StockDay(16230, 92.7, 93.88, 91.75, 93.7, 75414804),
   StockDay(16227, 92.84, 93.04, 92.07, 92.22, 87620911),
   StockDay(16226, 92.31, 92.77, 91.8, 92.48, 75951141),
   StockDay(16225, 91.06, 92.56, 90.87, 92.12, 83870521),
   StockDay(16224, 89.78, 91.25, 89.75, 91.08, 73231620),
   StockDay(16223, 90.57, 90.69, 88.93, 89.81, 92337903),
   StockDay(16220, 91.14, 92.02, 89.84, 90.43, 141005137),
   StockDay(16219, 89.69, 90.98, 89.68, 90.77, 94118633),
   StockDay(16218, 89.43, 89.98, 89.11, 89.14, 78921885),
   StockDay(16217, 87.98, 89.41, 87.95, 89.38, 87216605),
   StockDay(16213, 86.75, 87.82, 86.64, 87.73, 58052491),
   StockDay(16212, 86.66, 87.12, 86.3, 86.75, 50218945),
   StockDay(16211, 86.26, 86.67, 86.01, 86.62, 49249914),
   StockDay(16210, 86.36, 86.63, 85.82, 86.39, 58708986),
   StockDay(16209, 85.41, 86.76, 85.33, 86.37, 79439024),
   StockDay(16206, 84.09, 85.36, 83.63, 85.36, 69091834),
   StockDay(16205, 84.96, 85.23, 84.01, 84.12, 57711731),
   StockDay(16204, 84.63, 85.34, 84.53, 84.84, 41600846),
   StockDay(16203, 84.57, 84.93, 84.39, 84.82, 39934594),
   StockDay(16202, 83.93, 84.81, 83.91, 84.69, 53324677),
   StockDay(16199, 83.51, 83.75, 82.9, 83.65, 72899498),
   StockDay(16198, 84.04, 84.92, 83.77, 84, 57574363),
   StockDay(16197, 85.04, 85.33, 83.96, 84.62, 70715988),
   StockDay(16196, 85.97, 86.34, 84.92, 84.92, 93641373),
   StockDay(16195, 84.31, 85.86, 84.29, 85.85, 71766758),
   StockDay(16192, 84.62, 84.89, 84.24, 84.65, 47878572),
   StockDay(16191, 84.57, 84.97, 83.77, 84.5, 61052418),
   StockDay(16190, 84.66, 85.63, 84.26, 84.3, 114220883),
   StockDay(16189, 84.82, 85.14, 84.22, 84.62, 84344673),
   StockDay(16188, 81.83, 85.11, 81.79, 84.87, 167371680),
   StockDay(16185, 80.65, 81.71, 80.57, 81.71, 97568814),
   StockDay(16184, 81.17, 81.43, 80.1, 81.11, 189978082),
   StockDay(16183, 75.58, 75.88, 74.92, 74.96, 98735259),
   StockDay(16182, 75.47, 75.98, 75.21, 75.96, 50664453),
   StockDay(16181, 75.05, 76.02, 74.85, 75.88, 45668931),
   StockDay(16177, 74.29, 75.39, 74.17, 74.99, 71106721),
   StockDay(16176, 74.01, 74.44, 73.45, 74.14, 53732994),
   StockDay(16175, 74.32, 74.52, 73.05, 73.99, 66622577),
   StockDay(16174, 74.56, 74.59, 73.89, 74.53, 51445177),
   StockDay(16171, 74.14, 74.69, 73.88, 74.23, 67975012),
   StockDay(16170, 75.81, 76.03, 74.74, 74.78, 59912818),
   StockDay(16169, 74.66, 75.78, 74.57, 75.76, 51542722),
   StockDay(16168, 75.03, 75.16, 74.1, 74.78, 60971883),
   StockDay(16167, 75.43, 75.84, 74.56, 74.78, 72462530),
   StockDay(16164, 77.12, 77.14, 75.8, 75.97, 68812485),
   StockDay(16163, 77.34, 77.5, 76.81, 76.97, 40648111),
   StockDay(16162, 77.48, 77.64, 77.18, 77.51, 45104871),
   StockDay(16161, 76.82, 77.41, 76.68, 77.38, 50189685),
   StockDay(16160, 77.03, 77.26, 76.56, 76.68, 42167188),
   StockDay(16157, 76.9, 76.99, 76.32, 76.69, 50141063),
   StockDay(16156, 77.14, 77.36, 76.45, 76.78, 55507676),
   StockDay(16155, 78.07, 78.43, 76.98, 77.11, 74942224),
   StockDay(16154, 77.36, 77.96, 77.08, 77.86, 70573356),
   StockDay(16153, 76.92, 77.21, 76.44, 77.03, 88924871),
   StockDay(16150, 75.99, 76.25, 75.19, 76.12, 93612169),
   StockDay(16149, 75.7, 76.1, 75.34, 75.53, 52099537),
   StockDay(16148, 76.04, 76.61, 75.57, 75.89, 56188958),
   StockDay(16147, 75.13, 76, 75.03, 75.91, 52411863),
   StockDay(16146, 75.39, 75.71, 75.12, 75.25, 49886074),
   StockDay(16143, 75.54, 75.84, 74.71, 74.96, 59299492),
   StockDay(16142, 76.78, 77.09, 75.59, 75.81, 64435609),
   StockDay(16141, 76.36, 76.76, 76, 76.66, 50195460),
   StockDay(16140, 76.49, 76.96, 76.08, 76.58, 70198849),
   StockDay(16139, 75.48, 76.19, 75.48, 75.85, 44691430),
   StockDay(16136, 75.87, 76, 75.15, 75.78, 55415241),
   StockDay(16135, 76.11, 76.35, 75.44, 75.82, 46423111),
   StockDay(16134, 75.85, 76.39, 75.59, 76.05, 50065519),
   StockDay(16133, 75.86, 76.09, 75.4, 75.89, 64884834),
   StockDay(16132, 74.77, 75.81, 74.69, 75.39, 59784494),
   StockDay(16129, 75.58, 76.11, 74.59, 75.18, 93074653),
   StockDay(16128, 73.88, 75.54, 73.72, 75.38, 75557321),
   StockDay(16127, 74.8, 75, 73.66, 73.91, 69131286),
   StockDay(16126, 75.63, 75.65, 74.43, 74.58, 58247350),
   StockDay(16125, 74.74, 75.7, 74.63, 75.36, 72364950),
   StockDay(16122, 76.11, 76.37, 74.94, 75.04, 69757247),
   StockDay(16121, 76.14, 76.71, 75.57, 75.88, 76529103),
   StockDay(16120, 77.82, 78.13, 76.34, 76.77, 78554420),
   StockDay(16119, 78, 78.74, 77.94, 78, 65306248),
   StockDay(16115, 77.5, 78, 77.32, 77.71, 68468036),
   StockDay(16114, 76.38, 77.84, 76.31, 77.78, 76960156),
   StockDay(16113, 76.71, 77.08, 76.18, 76.56, 77127064),
   StockDay(16112, 75.8, 76.82, 75.64, 76.57, 70672252),
   StockDay(16111, 74.09, 76, 74, 75.57, 86451022),
   StockDay(16108, 74.48, 74.7, 73.91, 74.24, 93638601),
   StockDay(16107, 72.87, 73.36, 72.54, 73.22, 64497223),
   StockDay(16106, 72.37, 73.61, 72.32, 73.23, 82322156),
   StockDay(16105, 72.26, 72.78, 71.82, 72.68, 94273543),
   StockDay(16104, 71.8, 72.53, 71.33, 71.65, 100620772),
   StockDay(16101, 70.74, 71.65, 70.51, 71.51, 116336444),
   StockDay(16100, 71.79, 72.36, 70.96, 71.4, 169762789),
   StockDay(16099, 71.99, 72.48, 71.23, 71.54, 125942796),
   StockDay(16098, 72.68, 73.57, 71.72, 72.36, 266833581),
   StockDay(16097, 78.58, 79.26, 77.96, 78.64, 144219152),
   StockDay(16094, 79.14, 79.37, 77.82, 78.01, 108384437),
   StockDay(16093, 78.56, 79.5, 77.83, 79.45, 100978346),
   StockDay(16092, 78.7, 79.61, 78.26, 78.79, 95219334),
   StockDay(16091, 77.28, 78.58, 77.2, 78.44, 82255544),
   StockDay(16087, 78.78, 78.87, 77.13, 77.24, 108426689),
   StockDay(16086, 79.27, 79.55, 78.81, 79.18, 57471330),
   StockDay(16085, 79.07, 80.03, 78.81, 79.62, 98472619),
   StockDay(16084, 76.89, 78.1, 76.81, 78.06, 83734371),
   StockDay(16083, 75.7, 77.5, 75.7, 76.53, 94860843),
   StockDay(16080, 77.12, 77.26, 75.87, 76.13, 76320664),
   StockDay(16079, 78.11, 78.12, 76.48, 76.65, 69905199),
   StockDay(16078, 76.97, 77.94, 76.96, 77.64, 64686685),
   StockDay(16077, 77.76, 77.99, 76.85, 77.15, 79432766),
   StockDay(16076, 76.78, 78.11, 76.23, 77.7, 103359151),
   StockDay(-1, 0.0, 0.0, 0.0, 0.0, 0)
};